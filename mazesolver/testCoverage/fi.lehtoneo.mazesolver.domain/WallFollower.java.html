<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fi"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Wallfollower.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">mazesolver</a> &gt; <a href="index.source.html" class="el_package">fi.lehtoneo.mazesolver.domain</a> &gt; <span class="el_source">Wallfollower.java</span></div><h1>Wallfollower.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package fi.lehtoneo.mazesolver.domain;

import fi.lehtoneo.mazesolver.util.Cell;
import java.util.ArrayList;
import java.util.List;

/**
 * 
 * Class to solve a maze with Wallfollower algorithm
 */
public class Wallfollower {
    
    char[][] maze;
    // 0 down, 1 right, 2 up, 3 left
    int direction;
    int down;
    int right;
    int left;
    int up;
    
    List&lt;Cell&gt; routeList;
    
    private int gX;
    private int gY;
    private int x;
    private int y;
    
     /**
     * Constuctor for class Wallfollower
     * @param grid maze which is solved by method solve()
     * @param start the point where algorithm starts. Here start[0] is x of starting point and start[1] is y of starting point.
     * @param end the point that the algorithm tries to find the path to. Here end[0] is x of ending point and end[1] is y of ending point.
     */
<span class="fc" id="L39">    public Wallfollower(char[][] grid, int[] start, int[] end) {</span>
<span class="fc" id="L40">        this.maze = grid;</span>
<span class="fc" id="L41">        direction = 1;</span>
<span class="fc" id="L42">        right = 0;</span>
<span class="fc" id="L43">        up = 1;</span>
<span class="fc" id="L44">        left = 2;</span>
<span class="fc" id="L45">        down = 3;</span>
        
<span class="fc" id="L47">        routeList = new ArrayList&lt;&gt;();</span>
        
<span class="fc" id="L49">        x = start[0];</span>
<span class="fc" id="L50">        y = start[1];</span>
        
<span class="fc" id="L52">        gX = end[0];</span>
<span class="fc" id="L53">        gY = end[1];</span>
<span class="fc" id="L54">    }</span>
    
      /**
     * 
     * Solves the maze given in constructor with Wallfinder algorithm.
     * It adds every visited maze cell into routeList.
     * After the algorithm is complete, routeList contains the path that the algorithm found.
     */
    public void solve() {
        
        while(true) {
            
            
<span class="fc" id="L67">            routeList.add(new Cell(x,y));</span>
<span class="fc bfc" id="L68" title="All 4 branches covered.">            if(x == gX &amp;&amp; y == gY) {</span>
<span class="fc" id="L69">                break;</span>
            }
            
<span class="fc bfc" id="L72" title="All 2 branches covered.">            if(direction == right) {</span>
<span class="fc bfc" id="L73" title="All 2 branches covered.">                if (maze[x + 1][y] == '.') {</span>
<span class="fc" id="L74">                    direction = down;</span>
<span class="fc" id="L75">                    x++;</span>
<span class="fc bfc" id="L76" title="All 2 branches covered.">                } else if (maze[x][y + 1] == '.') {</span>
<span class="fc" id="L77">                    direction = right;</span>
<span class="fc" id="L78">                    y++;</span>
<span class="fc bfc" id="L79" title="All 2 branches covered.">                } else if (maze[x - 1][y] == '.') {</span>
<span class="fc" id="L80">                    x--;</span>
<span class="fc" id="L81">                    direction = up;</span>
                } else {
<span class="fc" id="L83">                    y--;</span>
<span class="fc" id="L84">                    direction = left;</span>
                }
                
<span class="fc bfc" id="L87" title="All 2 branches covered.">            } else if (direction == up) {</span>
<span class="fc bfc" id="L88" title="All 2 branches covered.">                if(maze[x][y + 1] == '.') {</span>
<span class="fc" id="L89">                    direction = right;</span>
<span class="fc" id="L90">                    y++;</span>
<span class="fc bfc" id="L91" title="All 2 branches covered.">                } else if (maze[x - 1][y] == '.') {</span>
<span class="fc" id="L92">                    direction = up;</span>
<span class="fc" id="L93">                    x--;</span>
<span class="fc bfc" id="L94" title="All 2 branches covered.">                } else if (maze[x][y - 1] == '.') {</span>
<span class="fc" id="L95">                    direction = left;</span>
<span class="fc" id="L96">                    y--;</span>
                } else {
<span class="fc" id="L98">                    direction = down;</span>
<span class="fc" id="L99">                    x++;</span>
                }
                
                // 0 right, 1 up, 2 left , 3 down
<span class="fc bfc" id="L103" title="All 2 branches covered.">            } else if(direction == left) {</span>
<span class="fc bfc" id="L104" title="All 2 branches covered.">                if(maze[x - 1][y] == '.') {</span>
<span class="fc" id="L105">                    direction = up;</span>
<span class="fc" id="L106">                    x--;</span>
<span class="fc bfc" id="L107" title="All 2 branches covered.">                } else if (maze[x][y - 1] == '.') {</span>
<span class="fc" id="L108">                    direction = left;</span>
<span class="fc" id="L109">                    y--;</span>
<span class="fc bfc" id="L110" title="All 2 branches covered.">                } else if (maze[x + 1][y] == '.') {</span>
<span class="fc" id="L111">                    direction = down;</span>
<span class="fc" id="L112">                    x++;</span>
                } else {
<span class="fc" id="L114">                    direction = right;</span>
<span class="fc" id="L115">                    y++;</span>
                }
                
            } else {
<span class="fc bfc" id="L119" title="All 2 branches covered.">                if (maze[x][y - 1] == '.') {</span>
<span class="fc" id="L120">                    direction = left;</span>
<span class="fc" id="L121">                    y--;</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">                } else if (maze[x + 1][y] == '.') {</span>
<span class="fc" id="L123">                    direction = down;</span>
<span class="fc" id="L124">                    x++;</span>
<span class="fc bfc" id="L125" title="All 2 branches covered.">                } else if (maze[x][y + 1] == '.') {</span>
<span class="fc" id="L126">                    direction = right;</span>
<span class="fc" id="L127">                    y++;</span>
                } else {
<span class="fc" id="L129">                    direction = up;</span>
<span class="fc" id="L130">                    x--;</span>
                }
            }
        }
        
        
        
<span class="fc" id="L137">    }</span>
    
    public List&lt;Cell&gt; getRouteList() {
<span class="fc" id="L140">        return routeList;</span>
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>